Лабораторная работа №07: Управление доступом, расширениями и локализацией
Цель работы: Освоить управление правами доступа пользователей, работу с расширениями
PostgreSQL и настройку параметров локализации. Получить практические навыки настройки
аутентификации, управления привилегиями, установки расширений и миграции данных между разными
кодировками.
**Дата:** 2025-11-30
**Семестр:** 4 курс 1 полугодие – 7 семестр  
**Группа:** ПИЖ-б-о-22-1  
**Дисциплина:** Администрирование баз данных  
**Студент:** Джараян Арег Александрович
### Теоретическая часть (краткое содержание):
**Управление доступом: Система ролей и привилегий в PostgreSQL. Настройка аутентификации
через файл pg_hba.conf.**
**Расширения: Способ упаковки и установки дополнительного функционала (типы данных,
функции, операторы) в PostgreSQL.**
**Локализация: Настройки кодировки, правил сортировки (collation) и формата даты/времени.**
## Практическая работа


###Модуль 1: Управление доступом

**1. Базовые привилегии: Создал новую базу данных access_db и двух пользователей: writer (с правом создания
объектов) и reader (только чтение). Отзовал у роли public все привилегии на схему public в новой БД. Выдал роли writer права CREATE и USAGE на схему public, а роли reader — только USAGE. Настроил привилегии по умолчанию так, чтобы роль reader автоматически получала право SELECT на новые таблицы в схеме public, принадлежащие writer. Создал пользователей w1 (входит в роль writer) и r1 (входит в роль reader).
Подключился под writer, создайте таблицу test_table. Убедился, что r1 может только читать ее, а w1 — имеет полный доступ (включая DELETE).**








**2. Аутентификация (Практика+): Создал пользовательские роли alice и bob. Отредактировал pg_hba.conf, разрешив беспарольный вход (trust) только для postgres и student. Для всех остальных методов установилreject или md5. Перезагрузил конфигурацию. Убедился, что вход для alice и bob запрещен.
Для alice и bob настройте аутентификацию по peer (сопоставление с пользователем ОС).
Убедился, что войти нельзя без создания пользователя в ОС. Создал в ОС пользователя alice. Настроил вход в PostgreSQL для роли alice с методом peer. Проверил вход.Проверио, можно ли использовать одно отображение peer для нескольких ролей.**





###Модуль 2: Управление расширениями

**1. Установка расширения: Установил расширение units_of_measure (или uom, или аналогичное, доступное в вашей сборке). Убедился, что оно появилось в pg_available_extensions.**






**2. Создание и исследование: Создал расширение в своей БД без указания версии. Определил, какая версия
установилась и какие скрипты выполнились (можно посмотреть в системном каталоге).**





**3. Добавление данных: Добавил в справочник расширения новые единицы измерения (например, футы и дюймы).**






**4. Управление доступом: Изменил права доступа к таблицам расширения: отзовите SELECT у public, выдайте его
новой специальной роли.**




**5. Резервное копирование: Используя pg_dump, выгрузил объекты расширения. Изучил дамп. Убедился, что
выгружаются метаданные (таблицы, типы, функции) и данные.**




### Модуль 3: Локализация
**1. Миграция между кодировками: Создал базу данных с кодировкой KOI8R. В ней создайте таблицу и вставьте строки с кириллическими символами. Сделал логический дамп этой базы с помощью pg_dump. Создал базу данных с кодировкой UTF8. Восстановил в нее дамп. Проверил целостность данных. Объяснил возможные проблемы и их решения.**








**2. Локализация дат: Получил номер сегодняшнего дня недели (например, с помощью EXTRACT(DOW FROM
CURRENT_DATE)). Изменил параметры локализации сеанса (например, lc_time). Повлияло ли это на номер
дня недели? Объяснил, почему.**

